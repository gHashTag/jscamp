---
id: web3-00
title: Uploading to IPFS with NFT.storage
sidebar_label: –ó–∞–≥—Ä—É–∑–∫–∞ –≤ IPFS —Å –ø–æ–º–æ—â—å—é NFT.storage
---

–í —ç—Ç–æ–º —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–µ –º—ã –≤—ã–±–∏—Ä–∞–µ–º [IPFS](https://ipfs.tech), –¥–µ—Ü–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ—Å—Ç–∞–≤—â–∏–∫ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞, —á—Ç–æ–±—ã —Ä–∞–∑–º–µ—Å—Ç–∏—Ç—å –≤—ã–±—Ä–∞–Ω–Ω–æ–µ —Ñ–æ—Ç–æ –∏ –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö.

–ú—ã —Ç–∞–∫–∂–µ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å [NFT.storage](https://nft.storage/docs/) –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –Ω–∞–ø—Ä—è–º—É—é –≤ IPFS —á–µ—Ä–µ–∑ –∏—Ö HTTP API. –í—ã –º–æ–∂–µ—Ç–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è –∏ –ø–æ–ª—É—á–∏—Ç—å –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API-–∫–ª—é—á –Ω–∞ –∏—Ö —Å–∞–π—Ç–µ.

## –í—ã–±–æ—Ä —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏

–í–∞–º –Ω—É–∂–Ω–æ –≤—ã–±—Ä–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ —Ñ–æ—Ç–æ –∏–∑ –Ω–∞—à–µ–π –≥–∞–ª–µ—Ä–µ–∏. –ß—Ç–æ–±—ã –ø—Ä–µ–¥—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤—ã–±–æ—Ä–∞ –∏ –ø–æ–ª—É—á–∏—Ç—å –ø—É—Ç—å –∫ —Ñ–∞–π–ª—É, –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ `launchImageLibrary` –∏–∑ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `react-native-image-picker`.

:::info
–í –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —ç—Ç–æ –¥–µ–ª–∞–µ—Ç—Å—è –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ `NftMinter`, –≥–¥–µ `handleSelectImage` –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ [–Ω–∞–∂–∞—Ç–∏–∏ –∫–Ω–æ–ø–∫–∏](https://github.com/solana-mobile/tutorial-apps/blob/main/MobileNFTMinter/components/NftMinter.tsx#L44).  
–ú—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é –∫–∞–∫ —Å–æ—Å—Ç–æ—è–Ω–∏–µ, —á—Ç–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –µ–≥–æ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ.
:::

```jsx
import {launchImageLibrary} from 'react-native-image-picker';

const photo = await launchImageLibrary({
    selectionLimit: 1,
    mediaType: 'photo',
});
const selectedPhoto = photo?.assets?.[0];
if (!selectedPhoto?.uri) {
    console.warn('Selected photo not found');
    return;
}
const imagePath = selectedPhoto.uri;
```

## –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–æ—Ç–æ

–¢–µ–ø–µ—Ä—å, –∫–æ–≥–¥–∞ —É –Ω–∞—Å –µ—Å—Ç—å –ø—É—Ç—å –∫ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—é, –Ω–∞–º –Ω—É–∂–Ω–æ –∑–∞–≥—Ä—É–∑–∏—Ç—å —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã —Ñ–∞–π–ª–∞ –≤ IPFS, –∏—Å–ø–æ–ª—å–∑—É—è –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É NFT.storage `/upload`.

–®–∞–≥–∏:

1. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫—É `rn-fetch-blob`, —á—Ç–æ–±—ã –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ –≤ —Å—Ç—Ä–æ–∫—É Base 64.
2. –ü—Ä–µ–æ–±—Ä–∞–∑—É–π—Ç–µ –≤ —Å—ã—Ä—ã–µ –±–∞–π—Ç—ã, –¥–µ–∫–æ–¥–∏—Ä—É—è —Å—Ç—Ä–æ–∫—É Base64 —Å –ø–æ–º–æ—â—å—é `Buffer`.
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `fetch`, —á—Ç–æ–±—ã –æ—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞–ø—Ä–æ—Å, —Å–æ–¥–µ—Ä–∂–∞—â–∏–π –±–∞–π—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è, –Ω–∞ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É –∑–∞–≥—Ä—É–∑–∫–∏.

:::caution
–ù–∞ —ç—Ç–æ–º —à–∞–≥–µ –≤–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å —Å–≤–æ–π —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–π API-–∫–ª—é—á –æ—Ç NFT.storage. –í –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏–µ `NFT_STORAGE_API_KEY` —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –±–∏–±–ª–∏–æ—Ç–µ–∫–∏ `react-native-config`.
:::

```jsx
// Read the image file and get the base64 string.
const imageBytesInBase64: string = await RNFetchBlob.fs.readFile(
    imagePath,
    'base64',
);

// Convert base64 into raw bytes.
const bytes = Buffer.from(imageBytesInBase64, 'base64');

// Upload the image to IPFS by sending a POST request to the NFT.storage upload endpoint.
const headers = {
    Accept: 'application/json',
    Authorization: `Bearer ${Config.NFT_STORAGE_API_KEY}`,
};
const imageUpload = await fetch('https://api.nft.storage/upload', {
    method: 'POST',
    headers: {
        ...headers,
        'Content-Type': 'image/jpg',
    },
    body: bytes,
});

const imageData = await imageUpload.json();
console.log(imageData.value.cid);
```

–ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, `imageData.value.cid` –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –¥–µ–π—Å—Ç–≤—É—é—â–∏–π [CID (Content Identifier)](https://docs.solanamobile.com/react-native/mobile_nft_minter_tutorial#uploading-to-ipfs-with-nftstorage). –≠—Ç–æ —Å—Ç—Ä–æ–∫–∞, –∫–æ—Ç–æ—Ä–∞—è —É–Ω–∏–∫–∞–ª—å–Ω–æ –∏–¥–µ–Ω—Ç–∏—Ñ–∏—Ü–∏—Ä—É–µ—Ç –≤–∞—à –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å.

–í—ã –º–æ–∂–µ—Ç–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Å–≤–æ–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–π —Ä–µ—Å—É—Ä—Å –Ω–∞ [IPFS gateway](https://docs.ipfs.tech/concepts/ipfs-gateway/), –ø–µ—Ä–µ–¥–∞–≤ CID –≤ URL (–Ω–∞–ø—Ä–∏–º–µ—Ä, `https://ipfs.io/ipfs/<cid>`).

## –ó–∞–≥—Ä—É–∑–∫–∞ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

–î–∞–ª–µ–µ –Ω–∞–º –Ω—É–∂–Ω–æ —Å–æ—Å—Ç–∞–≤–∏—Ç—å –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π [—Å—Ç–∞–Ω–¥–∞—Ä—Ç—É Metaplex NFT](https://docs.metaplex.com/programs/token-metadata/token-standard#the-non-fungible-standard), –∑–∞—Ç–µ–º –∑–∞–≥—Ä—É–∑–∏—Ç—å –µ–≥–æ –Ω–∞ —Ç—É –∂–µ –∫–æ–Ω–µ—á–Ω—É—é —Ç–æ—á–∫—É `/upload`.

:::info
 –í –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è —à–∞–≥ –∑–∞–≥—Ä—É–∑–∫–∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –≤ —Ñ—É–Ω–∫—Ü–∏–∏ [`uploadToIPFS`](https://github.com/solana-mobile/tutorial-apps/blob/main/MobileNFTMinter/ipfs/uploadToIPFS.ts#L7), –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è –ø–æ–∑–∂–µ –≤ —Ä–∞–º–∫–∞—Ö –±–æ–ª–µ–µ –∫—Ä—É–ø–Ω–æ–π [`mintNft`](https://github.com/solana-mobile/tutorial-apps/blob/main/MobileNFTMinter/components/NftMinter.tsx#L61) —Ñ—É–Ω–∫—Ü–∏–∏.  
–°–ª–µ–¥—É–µ—Ç –æ—Ç–º–µ—Ç–∏—Ç—å –Ω–µ–±–æ–ª—å—à–æ–µ –æ—Ç–ª–∏—á–∏–µ. –ü–æ–ª–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Å–ª–µ–Ω–Ω—ã–π CID –¥–ª—è —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∞ –Ω–µ –æ–∂–∏–¥–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏. –≠—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –∫–æ—Ç–æ—Ä–∞—è –æ–±—ä—è—Å–Ω—è–µ—Ç—Å—è –≤ —Å–ª–µ–¥—É—é—â–µ–º —Ä–∞–∑–¥–µ–ª–µ.
:::

```jsx
// Construct the metadata fields.
const metadata = JSON.stringify({ 
    name,
    description,
    image: `https://ipfs.io/ipfs/${imageData.value.cid}`,
});
// Upload to IPFS
const metadataUpload = await fetch('https://api.nft.storage/upload', {
    method: 'POST',
    headers: {
        ...headers,
        'Content-Type': 'application/json',
    },
    body: metadata,
});

const metadataData = await metadataUpload.json();
console.log(metadataData.value.cid);
```

–ï—Å–ª–∏ —É—Å–ø–µ—à–Ω–æ, `metadataData.value.cid` —Ç–µ–ø–µ—Ä—å –±—É–¥–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å CID, —É–∫–∞–∑—ã–≤–∞—é—â–∏–π –Ω–∞ JSON-–æ–±—ä–µ–∫—Ç, –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é—â–∏–π –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ NFT.

–ü–æ–¥—ã—Ç–æ–∂–∏–≤, —É –Ω–∞—Å —Ç–µ–ø–µ—Ä—å –µ—Å—Ç—å –¥–≤–∞ CID, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–Ω–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤ IPFS. –ü–µ—Ä–≤—ã–π ‚Äî CID –Ω–∞—à–µ–π –∑–∞–≥—Ä—É–∂–µ–Ω–Ω–æ–π —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏, –∏ –≤—Ç–æ—Ä–æ–π ‚Äî CID JSON Metadata (–∫–æ—Ç–æ—Ä—ã–π –∏–º–µ–µ—Ç —Å—Å—ã–ª–∫—É –Ω–∞ CID —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –≤ –ø–æ–ª–µ `image`).

## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ CID

–í—ã –º–æ–∂–µ—Ç–µ –∑–∞–º–µ—Ç–∏—Ç—å –≤ –ø—Ä–∏–º–µ—Ä–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —á—Ç–æ –≤–æ –≤—Ä–µ–º—è —à–∞–≥–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ [`uploadToIPFS`](https://github.com/solana-mobile/tutorial-apps/blob/main/MobileNFTMinter/ipfs/uploadToIPFS.ts#L50) –º—ã –º–æ–∂–µ–º –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ –≤—ã—á–∏—Å–ª–∏—Ç—å CID –∞–∫—Ç–∏–≤–∞ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –¥–æ –µ–≥–æ —Ñ–∞–∫—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –≤ IPFS. –≠—Ç–æ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è, –ø–æ–∑–≤–æ–ª—è—é—â–∞—è –Ω–∞–º —Å–æ–∑–¥–∞–≤–∞—Ç—å –∏ –∑–∞–≥—Ä—É–∂–∞—Ç—å –æ–±—ä–µ–∫—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –±–µ–∑ –æ–∂–∏–¥–∞–Ω–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –∑–∞–≥—Ä—É–∑–∫–∏ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –∏ –≤–æ–∑–≤—Ä–∞—Ç–∞ CID.

```jsx
// Fire off both uploads aysnc
return Promise.all([
    imageUpload.then(response => response.json()),
    metadataUpload.then(response => response.json()),
]);
```

–ú—ã –∏—Å–ø–æ–ª—å–∑—É–µ–º —ç—Ç–æ –ø—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–æ, –∑–∞–≥—Ä—É–∂–∞—è –∫–∞–∫ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏—é, —Ç–∞–∫ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ.

:::tip
–≠—Ç–æ —Å—Ç–∞–ª–æ –≤–æ–∑–º–æ–∂–Ω—ã–º, –ø–æ—Ç–æ–º—É —á—Ç–æ CID –≥–µ–Ω–µ—Ä–∏—Ä—É—é—Ç—Å—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ –∏–∑ –¥–≤–æ–∏—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –ª—é–±–æ–≥–æ –¥–∞–Ω–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–∞. –≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç, —á—Ç–æ –º—ã –º–æ–∂–µ–º –≤—ã—á–∏—Å–ª–∏—Ç—å CID –∞–∫—Ç–∏–≤–∞ –¥–æ –µ–≥–æ –∑–∞–≥—Ä—É–∑–∫–∏ –≤ IPFS.
:::

–ß—Ç–æ–±—ã –≤—ã—á–∏—Å–ª–∏—Ç—å CID –∏–∑ –±–∞–π—Ç–æ–≤ –¥–∞–Ω–Ω–æ–≥–æ –∞–∫—Ç–∏–≤–∞, —Å–º. —Ñ—É–Ω–∫—Ü–∏—é [`getCid`](https://github.com/solana-mobile/tutorial-apps/blob/main/MobileNFTMinter/ipfs/getCid.ts).

```jsx
import {CID, hasher} from 'multiformats';
const crypto = require('crypto-browserify');

const SHA_256_CODE = 0x12;
const IPLD_RAW_BINARY_CODE = 0x55;

const getCid = async (bytes: Buffer) => {
  const sha256 = hasher.from({
    // As per multiformats table
    // https://github.com/multiformats/multicodec/blob/master/table.csv#L9
    name: 'sha2-256',
    code: SHA_256_CODE,
    encode: input =>
      new Uint8Array(crypto.createHash('sha256').update(input).digest()),
  });
  const hash = await sha256.digest(bytes);
  const cid = await CID.create(1, IPLD_RAW_BINARY_CODE, hash);

  return cid;
};
```


<!-- ALL-CONTRIBUTORS-LIST:START - Do not remove or modify this section -->
<!-- prettier-ignore-start -->
<!-- markdownlint-disable -->
<table>
  <tr>
    <td align="center"><a href="https://medium.com/react-native-init"><img src="https://avatars0.githubusercontent.com/u/6774813?v=4" width="100px;" alt=""/><br /><sub><b>–î–∏–º–∫–∞–†–µ–∞–∫—Ç–Ω–∞—Ç–∏–≤–Ω—ã–π</b></sub></a><br /><a href="#content-gHashTag" title="Content">üñã</a></td>
        <td align="center"><a href="https://medium.com/react-native-init"><img src="https://avatars.githubusercontent.com/u/97621153?v=4" width="100px;" alt=""/><br /><sub><b>katsuhira02</b></sub></a><br /><a href="#content-katsuhira02" title="Content">üìù</a></td>
  </tr>
</table>

<!-- markdownlint-enable -->
<!-- prettier-ignore-end -->

<!-- ALL-CONTRIBUTORS-LIST:END -->

Go!

[![EnglishMoji!](/img/logo/englishmoji.png)](https://link-to.app/xvh7Ush9kl)
